<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HyphaMind Chorus</title>
  <link rel="icon" href="assets/img/favicon.ico">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <a class="brand" href="index.html">
        <img src="assets/logo.svg" alt="HyphaMind logo">
        <span>HyphaMind</span>
      </a>
      <p class="tagline">Chorus aligns spans, consent envelopes, and REFRAIN thresholds so operators hear the system before it shouts.</p>
    </div>
    <nav class="site-nav">
      <a href="/docs/">Docs</a>
      <a href="/blog/">Blog</a>
      <a href="https://community.hyphamind.ai" rel="noopener">Web</a>
      <a href="https://github.com/hyphamind-ai/hyphaMind/blob/1722dfa36f3bb6a53bd4342606dfedb4a426bfc8/docs/vnext/whitepaper_vnext.md">Philosophy</a>
    </nav>
  </header>
  <main class="container">
    <section class="section">
      <h1>Chorus layer</h1>
      <p class="lead">Chorus is the operational envelope for HyphaMind runs. Every ingress into Chorus carries the fields engineers need to reconstruct consent.</p>
      <div class="card" data-accent="teal">
        <h3>Common envelope fields</h3>
        <ul class="wrapped-list">
          <li><span class="code-inline">role</span> &mdash; orchestration role (root, valve, clasp, etc.).</li>
          <li><span class="code-inline">run</span> &mdash; run identifier used across the metabolic loop.</li>
          <li><span class="code-inline">ts</span> &mdash; precise timestamp of the envelope.</li>
          <li><span class="code-inline">consent_envelope_id</span> &mdash; resolvable consent record.</li>
          <li><span class="code-inline">trace_span_id</span> &mdash; span id linked to telemetry.</li>
        </ul>
        <p class="small">Envelopes without <span class="code-inline">consent_envelope_id</span> or <span class="code-inline">trace_span_id</span> are rejected upstream. ROOT before reach, even at the envelope level.</p>
      </div>
      <div class="card" data-accent="gold">
        <h3>Role metrics</h3>
        <p>Chorus aggregates metrics per role so operators can verify coverage:</p>
        <ul class="inline-list">
          <li>Receipt coverage</li>
          <li>Policy latency</li>
          <li>Consent entropy (ECE)</li>
          <li>Export integrity</li>
        </ul>
      </div>
    </section>

    <section class="section">
      <h2>REFRAIN guard</h2>
      <div class="card" data-accent="amber">
        <p>REFRAIN is a consent-first pause. When <span class="code-inline">ECE &gt; 0.08</span>, the run stops, a MIRE event is written, and operators must annotate the reason before resuming.</p>
        <ul class="checklist">
          <li><strong>Entropy threshold</strong> &mdash; adjustable, default 0.08.</li>
          <li><strong>Annotation required</strong> &mdash; resuming without an operator note is blocked.</li>
          <li><strong>Audit trail</strong> &mdash; SCAR marker ties the pause to a compliance record.</li>
        </ul>
      </div>
    </section>

    <section class="section">
      <h2>SPORE-vetted imports only</h2>
      <p>Only SPORE-vetted imports can add external nodes to CART. Chorus enforces this by validating <span class="code-inline">spore.hash</span> against ROOT receipts and rejecting unverified edges.</p>
    </section>
  </main>
  <footer class="footer">
    <div class="container">
      <strong>HyphaMind</strong>
      <small>Consent-first orchestration spine for multi-agent systems.</small>
      <small>&copy; <span id="year"></span> HyphaMind, LLC. Powered by HyphaMindâ„¢</small>
    </div>
  </footer>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>
